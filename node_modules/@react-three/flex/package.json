{
  "name": "@react-three/flex",
  "version": "1.0.0",
  "description": "`<Flex />` component for the 3D World.",
  "keywords": [
    "react",
    "three",
    "r3f",
    "react-three-fiber",
    "3d",
    "flex",
    "flexbox",
    "yoga",
    "yoga-layout"
  ],
  "repository": {
    "type": "git",
    "url": "git+https://github.com/pmndrs/react-three-flex.git"
  },
  "bugs": {
    "url": "https://github.com/pmndrs/react-three-flex/issues"
  },
  "homepage": "https://github.com/pmndrs/react-three-flex#readme",
  "license": "MIT",
  "main": "dist/index.cjs",
  "module": "dist/index.js",
  "types": "dist/index.d.ts",
  "exports": {
    ".": {
      "require": "./dist/index.cjs",
      "import": "./dist/index.js"
    },
    "./package.json": "./package.json",
    "./": "./"
  },
  "files": [
    "dist"
  ],
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix"
    ]
  },
  "dependencies": {
    "@react-pdf/yoga": "^2.0.4",
    "react-merge-refs": "^1.1.0"
  },
  "devDependencies": {
    "@babel/core": "7.17.9",
    "@babel/plugin-proposal-class-properties": "^7.16.7",
    "@babel/plugin-transform-modules-commonjs": "7.17.9",
    "@babel/plugin-transform-parameters": "7.16.7",
    "@babel/plugin-transform-runtime": "7.17.0",
    "@babel/plugin-transform-template-literals": "7.16.7",
    "@babel/preset-env": "7.16.11",
    "@babel/preset-react": "7.16.7",
    "@babel/preset-typescript": "^7.16.7",
    "@react-three/drei": "^9.4.3",
    "@react-three/fiber": "^8.0.11",
    "@rollup/plugin-babel": "^5.3.1",
    "@rollup/plugin-commonjs": "^21.1.0",
    "@rollup/plugin-json": "^4.1.0",
    "@rollup/plugin-node-resolve": "^13.2.1",
    "@storybook/addon-controls": "^6.4.22",
    "@storybook/addon-storysource": "^6.4.22",
    "@storybook/react": "^6.4.22",
    "@types/jest": "^27.4.1",
    "@types/node": "^17.0.24",
    "@types/react": "^18.0.5",
    "@types/react-dom": "^18.0.1",
    "@types/react-test-renderer": "^18.0.0",
    "@types/three": "^0.139.0",
    "@typescript-eslint/eslint-plugin": "^5.19.0",
    "@typescript-eslint/parser": "^5.19.0",
    "babel-loader": "^8.2.4",
    "eslint": "^8.13.0",
    "eslint-import-resolver-alias": "^1.1.2",
    "eslint-plugin-import": "^2.26.0",
    "eslint-plugin-jest": "^26.1.4",
    "eslint-plugin-react": "^7.29.4",
    "eslint-plugin-react-hooks": "^4.4.0",
    "husky": "^7.0.4",
    "jest": "^27.5.1",
    "lint-staged": "^12.3.8",
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "rimraf": "^3.0.2",
    "rollup": "^2.70.2",
    "rollup-plugin-filesize": "^9.1.2",
    "rollup-plugin-terser": "^7.0.2",
    "three": "^0.139.2",
    "ts-jest": "^27.1.4",
    "typescript": "^4.6.3"
  },
  "peerDependencies": {
    "@react-three/fiber": ">=8.0",
    "react": "^18.0.0",
    "three": ">=0.137"
  },
  "scripts": {
    "build": "rollup -c",
    "postbuild": "tsc --emitDeclarationOnly",
    "eslint": "eslint src --fix --ext=js,ts,tsx,jsx",
    "eslint-examples": "eslint examples/src --fix --ext=js,ts,tsx,jsx",
    "eslint:ci": "eslint src examples/src --fix --ext=js,ts,tsx,jsx",
    "test": "echo no tests yet",
    "storybook": "start-storybook -p 6006",
    "build-storybook": "build-storybook"
  },
  "readme": "# @react-three/flex\n\n[![Build Status](https://img.shields.io/github/workflow/status/pmndrs/react-three-flex/Release?style=flat&colorA=000000&colorB=000000)](https://github.com/pmndrs/react-three-flex/releases)\n[![Version](https://img.shields.io/npm/v/@react-three/flex?style=flat&colorA=000000&colorB=000000)](https://www.npmjs.com/package/@react-three/flex)\n[![Downloads](https://img.shields.io/npm/dt/@react-three/flex.svg?style=flat&colorA=000000&colorB=000000)](https://www.npmjs.com/package/@react-three/flex)\n[![Discord Shield](https://img.shields.io/discord/740090768164651008?style=flat&colorA=000000&colorB=000000&label=discord&logo=discord&logoColor=ffffff)](https://discord.gg/ZZjjNvJ)\n\nPlacing content in THREE.js is hard. **`@react-three/flex`** brings the webs flexbox spec to [react-three-fiber](https://github.com/pmndrs/react-three-fiber).\nIt is based on [Yoga](https://github.com/facebook/yoga), Facebook's open source layout engine for react-native.\n\n```bash\nnpm install @react-three/flex\n```\n\n<p align=\"center\">\n  <a href=\"https://codesandbox.io/embed/7psew\"><img width=\"274\" src=\"https://i.imgur.com/FOqC6Ml.gif\" /></a>\n  <a href=\"https://codesandbox.io/embed/gallant-elbakyan-lvwmj\"><img width=\"274\" src=\"https://i.imgur.com/PrQX2uI.gif\" /></a>\n  <a href=\"https://codesandbox.io/embed/r3flex-kbs4y\"><img width=\"274\" src=\"https://i.imgur.com/fykLiRl.gif\" /></a>\n</p>\n<p align=\"middle\">\n  <i>These demos are real, you can click them! They contain the full code, too.</i>\n</p>\n\n## Table of contents\n\n- [Usage](#usage)\n  - [Anchors](#anchors)\n  - [Stretching](#stretching)\n  - [Invalidation and Reflow](#invalidation-and-reflow)\n  - [Sizing](#sizing)\n  - [Axis Orientation](#axis-orientation)\n  - [Margin and Padding](#margin-and-padding)\n  - [Nesting](#nesting)\n  - [Measuring the Container](#measuring-the-container)\n- [API](#api)\n  - [Flexbox props](#flexbox-props)\n\n## Usage\n\nSimply create layouts by wrapping your 3D objects in different `<Box />` instances inside a `<Flex />` container. This way they will be automatically placed in the 3D space following the flexbox specification just like in the DOM.\n\n```jsx\nimport { Flex, Box } from '@react-three/flex'\n\nconst Layout = () => (\n  <Flex justifyContent=\"center\" alignItems=\"center\">\n    <Box centerAnchor>\n      <mesh geometry={box} />\n    </Box>\n    <Box centerAnchor flexGrow={1}>\n      <mesh geometry={torus} />\n    </Box>\n  </Flex>\n)\n```\n\nYou can tweak the container and the boxes using standard CSS flex properties, like `flexDirection` or `justifyContent` for the container and `flexGrow` for the boxes. There are also _shorthands_, like `align` and `justify`. See the props docs below for more info.\n\n### Anchors\n\nWhen positioning items, `react-three-flex` needs to know where the object anchor is: Yoga Layout expects the object position to be relative to the upper left corner, which is the same as the DOM expects.\n\nMost THREE.js geometries, though, are positioned relative to the object center. To tell `react-three-flex` that your `<Box />` positioning is relative to the center you need to set the `centerAnchor` prop to true.\n\n```jsx\n<Box centerAnchor>\n  <mesh geometry={sphere} />\n</Box>\n```\n\nIf you nest `<Box />` elements, though, you need to set it to false. See [Nesting](#nesting).\n\n![Anchors](./docs/anchors.png)\n\n### Stretching\n\nBy default `@react-three/flex` controls elements position only. In some cases you may want to control element sizing too. Since `@react-three/flex` has no information about how the inner content size works, you need to set your content size manually. To do so `@react-three/flex` provides you the container size in two ways:\n\n- Using a **children render function**:\n\n```jsx\n<Flex>\n  <Box width=\"auto\" height=\"auto\" flexGrow={1} centerAnchor>\n    {(width, height) => <Plane args={[width, height]} />}\n  </Box>\n</Flex>\n```\n\n- Using a **hook**:\n\n```jsx\nfunction Inner() {\n  const [width, height] = useFlexSize()\n  return <Plane args={[width, height]} />\n}\n\nfunction Outer() {\n  return (\n    <Flex>\n      <Box width=\"auto\" height=\"auto\" flexGrow={1} centerAnchor>\n        <Inner />\n```\n\nRemember that the `useFlexSize` hook works **ONLY** if your `<Box/>` is outside the component.\n\n### Invalidation and Reflow\n\nWhile the DOM's Flexbox has full control over all the changes of the tree, `@react-three/flex` runs on React, hence it has no way to know if a children size or shape has changed. For performance reasons Flex layout calculation _does not run every frame_, and it has to be triggered manually in some cases.\n\n**What will trigger a reflow:**\n\n- `<Flexbox/>` props changes (alignItems, size, ...)\n- `<Box/>` props changes (flexGrow, margin, ...)\n- `<Flexbox/>` and `<Box/>` rerenders with children differences\n\n```jsx\nfunction AnimatedBox() {\n  // Since <Box/> is inside the component, setting the state will rerender it, thus causing a reflow.\n  // ⚠️ If <Box/> were outside this component, this would NOT cause a reflow!\n  const [state, setState] = useState(true)\n  useInterval(() => setState((s) => !s), 1000)\n  return (\n    <Box centerAnchor>\n      <mesh>\n        <boxBufferGeometry attach=\"geometry\" args={[state ? 10 : 30, 10, 10]} />\n```\n\n**This will NOT cause a reflow!**\n\n```jsx\nfunction AnimatedBox() {\n  // ⚠️ Setting state does not rerender <Box/> since it's in the parent\n  // ‼️ No Reflow!!\n  const [state, setState] = useState(true)\n  useInterval(() => setState((s) => !s), 1000)\n  return (\n    <mesh scale={[state ? 1 : 3, 1, 1]}>\n      <boxBufferGeometry attach=\"geometry\" />\n    </mesh>\n  )\n}\n\nfunction Layout() {\n  return (\n    <Flex>\n      <Box centerAnchor>\n        <AnimatedBox />\n```\n\nFor every other case (setting size with the `useFrame` hook, performing `react-spring` animation, or `<Box/>` are not rerendered) you'll need to **manually cause a reflow**, using the `useReflow()` hook. Reflows requests are batched every frame so you can call it from hundreds of components without performance issues.\n\n**Animation with useFrame():**\n\n```jsx\nfunction AnimatedBox() {\n  const ref = useRef()\n  const reflow = useReflow()\n  useFrame(({ clock }) => {\n    ref.current.scale.x = 1 + Math.sin(clock.getElapsed())\n    reflow()\n  })\n  return (\n    <Box centerAnchor>\n      <mesh ref={ref}>\n```\n\n**`<Box/>` outside of component:**\n\n```jsx\nfunction AnimatedBox() {\n  const [state, setState] = useState(true)\n  useInterval(() => setState((s) => !s), 1000)\n  const reflow = useReflow()\n  useEffect(reflow, [state])\n  return (\n    <mesh ref={ref} scale={[state ? 1 : 3, 1, 1]}>\n```\n\n### Sizing\n\n`@react-three/flex` differs from DOM Flexbox in that it relies on a parent container for the root flex. It is required to specify its dimensions using `size` prop for wrapping and to be responsive.\n\n```jsx\n<Flex flexDirection=\"row\" flexWrap=\"wrap\" size={[300, 200, 0]}>\n  {/* ... */}\n</Flex>\n```\n\n**⚠️ WATCH OUT!** Yoga flexbox engine uses whole integer numbers to perform layout calculation to preserve precision - `@react-three/flex` multiplies every element size and flex prop by the `scaleFactor` of the root flex container. By default it's `100`, and works well for small scenes. If you use a different scene scale, make sure to tweak it accordingly.\n\n![Bounds](./docs/bounds.png)\n\n### Axis Orientation\n\nAnother important difference with DOM Flexbox is that you have to specify the plane of the container in 3D. The elements will be positioned in the 2D plane given by the two axes, using width and height calculated along the two axes.\n\nThe 2D flex container width and height will be calculated by looking at the `size` prop with respect of the chosen axes (`100` for `x` and `200` for `y` in this example).\n\nThe default plane is `xy`, the other possibilites are `yz` and `xz`.\n\n```jsx\n<Flex plane=\"xy\" size={[100, 200, 0]}>\n  {/* ... */}\n</Flex>\n```\n\n![Axes Orientation](./docs/axes_orientation.png)\n\n### Margin and Padding\n\nFor every `<Flex />` and `<Box />` component you can specify the margin and padding like in DOM elements.\n\n```jsx\n<Flex flexDirection=\"row\" size={[300, 200, 0]} padding={30} margin={5}>\n  <Box padding={5} marginTop={5} centerAnchor>\n    <mesh geometry={sphere} />\n  </Box>\n</Flex>\n```\n\n![Margin](./docs/margin.png)\n\n### Nesting\n\nSince a `<Flex />` component works the same way as a DOM one, you can easily make complex layouts by nesting flex containers.\n\n```jsx\n<Flex flexDirection=\"row\" flexWrap=\"wrap\" size={[50, 0, 0]}>\n  <Box centerAnchor>\n    <mesh geometry={sphere} />\n  </Box>\n  <Box flexDirection=\"column\" flexWrap=\"no-wrap\">\n    <Box centerAnchor>\n      <mesh geometry={sphere} />\n    </Box>\n    <Box centerAnchor>\n      <mesh geometry={box} />\n    </Box>\n  </Box>\n</Flex>\n```\n\n### Measuring the container\n\nWhen building responsive layouts you might need to synchronize the size of the 3D Flex container with the DOM, for example to synchronize scroll position or to modify the height of a scroll container.\nTo make it easier, you can use the `onReflow` prop on the root `<Flex>` component that will be called every time the flex layout is recalculated - e.g. when any content changes.\n\n```jsx\n<Flex onReflow={(totalWidth, totalHeight) => ...}>\n {/* ... */}\n</Flex>\n```\n\n## API\n\nYou can find a full list of props [here](https://github.com/pmndrs/react-three-flex/blob/master/src/props.ts).\n\n```jsx\n<Flex\n  size={[1, 1, 1]} // Total size of the flex container, see above\n  position={[0, 0, 0]} // Default - position for the flex container in the scene\n  direction=\"ltr\" // Default - right to left or right to left\n  plane=\"xy\" // Default - plane axes, see above\n  scaleFactor={100} // Default - integer scale factor, see above (Sizing)\n  onReflow={fn} // Called everytime the layout is recalculated\n  {...R3FlexProps} // Standard Flexbox props, described below\n>\n  <Box>{/* ... */}</Box>\n</Flex>\n```\n\n```jsx\n<Box\n  centerAnchor // If the inner content position is relative to its center, see above (Anchors)\n  {...R3FlexProps} // Standard Flexbox props, described below\n>\n  <mesh geometry={box} />\n</Box>\n```\n\nOr you can pass a **function as children**:\n\n```jsx\n<Box>{(width, height) => <Model width={width} height={height} />}</Box>\n```\n\n### Flexbox props\n\nBoth `<Flex/>` and `<Box />` components share the same Flexbox props API from Yoga. The library also provides string and number inputs for convenience and shorthands.\n\nExample:\n\n```jsx\n// Flex with padding top set to 10, alignItems to 'center', justifyContent to 'space-around' and flexWrap to 'wrap'\n<Flex pt={10} align=\"center\" justify=\"space-around\" wrap=\"wrap\">\n  {/* ... */}\n</Flex>\n```\n"
}